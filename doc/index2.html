

<!DOCTYPE html>
<html lang="en" data-ng-app="xcApp">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description"
	content="The STONKS long term variability estimator">
<meta name="author"
	content="Erwin Quintin and Laurent Michel and the team">

<title>STONKS</title>

<link href=/stonks/static/images/favicon.ico rel="SHORTCUT ICON">
<link href=/stonks/static/bootstrap-3.4.1-dist/css/bootstrap.min.css
	rel="stylesheet">
<link
	href=/stonks/static/bootstrap-3.4.1-dist/css/bootstrap-theme.min.css
	rel="stylesheet">
<link href=/stonks/static/css/normalize.css rel="stylesheet">
<link href=/stonks/static/css/main.css rel="stylesheet">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

</head>

<body role="document" data-ng-controller="MainCtrl">
	<div class="main-content-wrapper">


		<div class="jumbotron" id="top">
			<div class="container-fluid">
				<p class="text-center">
					<a target="_self" class="main-logo" href="/"><img
						src="/stonks/static/images/index/index_logo.png" /></a>
				</p>
				<h1>STONKS</h1>
				<h2>Long Term Variability Estimator</h2>

				<div class="file-area">
					<div class="row top">
						<div class="col-md-9">
							<p>Or upload a file with a list of coordinates</p>
						</div>
						<div class="col-md-3 text-right"
							style="padding-top: 3px; padding-right: 16px">
							<img src="/stonks/static/images/index/showquery.png" />


							<a class="sql" data-querylang-button href="javascript:void(0);">
								File format </a>
						</div>
					</div>

					<div class="input-group">

					    <input type="file" id="fileInput" class="form-control">
					    <span class="input-group-btn"><button id="uploadButton" class="btn btn-primary">UPLOAD</button></span>
					</div>
					<!-- Modal -->
					<div id="emptyFileModal" class="modal" style="background-color: rgba(0, 0, 0, 0.4);" role="dialog">
						<div class="modal-dialog">
							<!-- Modal content-->
							<div class="modal-content">
								<div class="modal-header">
									<h4 class="modal-title">Processing the source list (can take minutes...)</h4>
								</div>
							</div>
						</div>
					</div>
					<script>  

	// JavaScript
	document.getElementById("uploadButton").addEventListener("click", function () {
	  const fileInput = document.getElementById("fileInput");
	  $("#emptyFileModal").css("display", "block");
	  
	  if (fileInput.files.length > 0) {
	    const formData = new FormData();
	    var fileName = "filename.tar";
	    formData.append("file", fileInput.files[0]);
	    
	    fetch("/stonks/process-obs", {
	      method: "POST",
	      body: formData,
	    })
        .then(response => {
			$("#emptyFileModal").css("display", "none")
        	if( response.ok ) {
        		fileName = response.headers.get('content-disposition').split('filename=')[1].split(';')[0];
        		return  response.blob()
            } else {
            	alert("no variability found")
            }
        })
	    .then(blob => {
			if( blob ) {      
            	var url = window.URL.createObjectURL(blob);
            	var a = document.createElement('a');
            	a.href = url;
            	a.download = fileName;
            	document.body.appendChild(a); 
            	a.click();    
            	a.remove();  
			}
 	    })
	    .catch(error => {
			$("#emptyFileModal").css("display", "none")
	      alert("An error occurred:", error);
	    });
	  } else {
		$("#emptyFileModal").css("display", "none")
	    alert("No file selected.");
	  }
	});
</script>



				</div>
			</div>
		</div>



		<div class="navbar navbar-inverse" role="navigation">
			<div class="container">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse"
						data-target=".navbar-collapse">
						<span class="sr-only"> Toggle navigation </span> <span
							class="icon-bar"></span> <span class="icon-bar"></span> <span
							class="icon-bar"></span>
					</button>
				</div>
				<div class="navbar-collapse collapse">
					<ul class="nav navbar-nav">
						<!-- @TODO class="active hidden-sm" -->
						<li class="active hidden-sm"><a target="_self" href="/stonks"><img
								src="/stonks/static/images/top_menu/home.png" /> Home </a></li>
						<li><a target="_blank" href="/stonks/doc"><img
								src="/stonks/static/images/top_menu/docs.png" /> Docs </a></li>
						<li><a target="_self" href="/stonks/links"><img
								src="/stonks/static/images/top_menu/links.png" /> Links </a></li>
						<li><a target="_self" href="/stonks/about"><img
								src="/stonks/static/images/top_menu/about.png" /> About </a></li>
					</ul>
				</div>
				<!--/.nav-collapse -->
			</div>
		</div>

		<div class="container main-content" role="main">

			<link href="/stonks/static/css/index.css" rel="stylesheet" />
			<div class="row">
				<div class="col-sm-7">
					<div class="news-on-main">
						<div class="page-header">
							<h1>NEWS</h1>
						</div>


						<div class="row news">
							<div class="col-sm-2 date">
								<div class="big">20</div>
								<div class="small">
									<span style="text-transform: capitalize">nov</span>
									2023
								</div>
							</div>
							<div class="col-sm-10">
								XMM2Athena page layout
							</div>
						</div>
						
						<div class="page-header"></div>
						
						<div class="row news">
							<div class="col-sm-2 date">
								<div class="big">03</div>
								<div class="small">
									<span style="text-transform: capitalize">apr</span>
									2023
								</div>
							</div>
							<div class="col-sm-10">
								New version of FLIX available! Changes include:
								<ul>
									<li>performance improvements (processing time divided by
										2)
									<li>possibility to request the server using a file
									<li>several improvements to the interface to improve user
										experience
									<li>bug fixes
								</ul>
							</div>
						</div>
						
						<div class="page-header"></div>

						<div class="row news">
							<div class="col-sm-2 date">
								<div class="big">28</div>
								<div class="small">
									<span style="text-transform: capitalize">jul</span>
									2022
								</div>
							</div>
							<div class="col-sm-10">
								The 4XMM-DR12 catalog release has been added to the website.
								Read more about it <a
									href="http://xmmssc.irap.omp.eu/Catalogue/4XMM-DR12/4XMM_DR12.html"
									target="_blank">here</a>. The website is still in early beta
								version !
							</div>
						</div>
						<div class="page-header"></div>

						<div class="row news">
							<div class="col-sm-2 date">
								<div class="big">12</div>
								<div class="small">
									<span style="text-transform: capitalize">apr</span>
									2022
								</div>
							</div>
							<div class="col-sm-10">Release of a beta version of FLIX
								sensitivity estimator</div>
						</div>
						<div class="page-header"></div>

					</div>
				</div>
				<div class="col-sm-5">
					<div class="main-overview">
						<h1>WEBSITE OVERVIEW</h1>
						<p>This website provides experimental access to the FLIX
							sensitivity estimator for XMM-Newton data. It is provided by the
							XMM-Newton Survey Science Centre at IRAP and is based on 4XMM
							Data Release 12 data provided by the XMM-Newton Survey Science
							Centre Consortium.</p>
						<p>What FLIX does: if you provide a position of interest on
							the sky, FLIX scans the public data products from XMM-Newton to
							determine whether each point was observed. If so FLIX:</p>
						<ul>
							<li>Estimates a detection threshold to the X-ray flux at
								that point in various energy bands,
							<li>Provides a crude estimate of the actual flux within a
								circle centred on that point
							<li>Scans the 4XMM catalogue listing any detections within 2
								arc-minutes, and display an X-ray image centred on the point.
						</ul>
						<p>
							Results are then returned in the form of a table and as a
							downloadable FITS file. For further information on input and
							outputs, see the online <a href='/docs'>documentation</a>
						<p>Please note that it is in its early beta stage...</p>
					</div>
					<br />
				</div>
			</div>


		</div>

	</div>
	<div class="container-fluid footer">
		<div class="container">
			<div class="copy links">
				&COPY; 2023, DEVELOPED IN THE FRAMEWORK OF THE <a
					href="http://xmm-ssc.irap.omp.eu/xmm2athena/" target="_blank">XMM2ATHENA
					PROJECT</a>
			</div>
			<img src="/stonks/static/images/index/xmm2athena_logo.png"> <img
				src="/stonks/static/images/index/EU_flag.jpg"> <a href="#top"
				class="bcktotop"></a>
			<div class="grant">
				This project has received funding from the European Union's Horizon
				2020 <br> research and innovation programme under grant
				agreement nÂ°101004168
			</div>
		</div>
	</div>

	<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
          <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

</body>
</html>


